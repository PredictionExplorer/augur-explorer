<html>
<head>
	<link href="/black/res/main.css" rel="stylesheet">
	<title>Open Interest history for Polymarkets Market {{.MarketId}}</title>
</head>
<body>
	<h3 class="page_title">Open Interest history for market id = {{.MarketId}}</h3>
<table class="market_detail">
</table>
<div id="price_history_graph"></div>
<h3>Collateral Transfers</h3>
This table shows all the flow of Collateral from source to destination, covering all the intermediate steps
<table class="generic">
	<tr class="generic">
		<th class="generic">TxId</th>
		<th class="generic">Date </th>
		<th class="generic">From Address</th>
		<th class="generic">To Address</th>
		<th class="generic">Amount (USDC)</th>
		<th class="generic">Fee <br>(USDC)</th>
		<th class="generic">Accum. Fees <br>(USDC)</th>
		<th class="generic">Open Interest<br>(UDSC)</th>
		<th class="generic">Notes</th>

	</tr>
	{{- range $i, $change := .OIHistory}}
		<tr class="generic">
			<td class="generic" title="BalID={{.BalChgId}} RedeemId={{.RedeemId}}" nowrap>
				{{ if gt .TxId 0 }}
					{{.TxId}}
				{{ end }}
				Evt {{.EvtlogId}}
			</td>
			<td class="generic" title="{{.BalChgId}}" nowrap>
				{{.DateTime}} / {{.UserAid}}
			</td>
			<td class="generic addr" title="{{.FromAid}}">
				{{ if gt .TxId 0 }}
					{{ if eq .FromAid $.CondTokAid }}Conditional Tokens
					{{ else }}
						{{ if eq .FromAid $.USDCAid }}
							USDC
						{{ else }}
							{{ if eq .FromAid $.MktMkrAid }}
								Market Maker
							{{ else }}
								{{.FromAddr}}
							{{end}}
						{{ end }}
					{{end}}
				{{ else }}
					<b>Market resolved</b>
				{{ end }}
			</td>
			<td class="generic addr" title="{{.ToAid}}">
				{{ if eq .ToAid $.CondTokAid }}
					Conditional Tokens
				{{else}}
					{{if eq .ToAid $.USDCAid }}
						USDC
					{{else}}
						{{ if eq .ToAid $.MktMkrAid }}
							Market Maker
						{{ else }}
							{{.ToAddr}}
						{{ end }}
					{{end}}
				{{end}}
			</td>
			<td class="generic" style="text-align: right;">
				{{ if gt .TxId 0 }}{{printf "%.6f" .Amount}}{{end}}
			</td>
			<td class="generic" style="text-align: right;">
				{{ if gt .TxId 0 }}{{printf "%.6f" .Fee}}{{end}}
			</td>
			<td class="generic" style="text-align: right;">
				{{ if gt .TxId 0 }}{{printf "%.6f" .FeeAccum}}{{end}}
			</td>
			<td class="generic" style="text-align: right;">
				{{ if gt .TxId 0 }}{{printf "%.6f" .OpenInterest}}{{end}}
			</td>
			<td nowrap class="generic">
				{{ .Note }}
			</td>
		</tr>
	{{- end}}
</table>
<br/><br/>
<h4>Totals</h4>
<table>
	<tr>
		<td>Final Open Interest</td>
		<td>{{printf "%.6f" .Totals.FinalOpenInterest }}</td>
	</tr>
	<tr>
		<td>Final Fees</td>
		<td>{{printf "%.6f" .Totals.FinalFees }}</td>
	</tr>
</table>
<br/><br/><br/>
</body>
</html>
